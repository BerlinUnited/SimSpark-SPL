; -*- mode: lisp; -*-

(RubySceneGraph 0 1)
(
; add lights
 (node Transform
       (setLocalPos -10 10 10)
       (node Light
	     (setDiffuse 1.0 1.0 1.0 1.0)
	     (setSpecular 0.1 0.1 0.1 1.0)
	     (setAmbient 0.5 0.5 0.5 1.0)
	     )
       )

 (node Transform
       (setLocalPos 10 -10 10)
       (node Light
	     (setDiffuse 1.0 1.0 1.0 1.0)
	     (setSpecular 0.1 0.1 0.1 1.0)
	     (setAmbient 0.0 0.0 0.0 1.0)
	     )
       )

;;
;; create the playing field
;; 

; create the base plane
 (node Transform
       (setLocalPos 0 0 -3)
       (node Box
	     (setMaterial matGreen)
	     (setExtents 100 70 4)
	     )
       (node PlaneCollider
	     (setParams 0 0 1.0 -1)
	     (node ContactJointHandler
		   (setContactBounceMode false)
		   )
	     )
       )


; create left side
 (node Transform
       (setLocalPos -55.5 0 0)
       (node Box
	     (setMaterial matWhite)
	     (setExtents 1 80 2)
	     ) 
       (node PlaneCollider
	     (setParams 1.0 0 0 -54)
	     )
       )


; create right side
 (node Transform
       (setLocalPos 55.5 0 0)
       (node Box
	     (setMaterial matWhite)
	     (setExtents 1 80 2)
	     ) 
       (node PlaneCollider
	     (setParams -1.0 0 0 -54)
	     )
       )


; create back side
 (node Transform
       (setLocalPos 0 40.5 0)
       (node Box
	     (setMaterial matGrey)
	     (setExtents 110 1 2)
	     ) 
       (node PlaneCollider
	     (setParams 0 -1.0 0 -39)
	     )
       )

; create front side
 (node Transform
       (setLocalPos 0 -40.5 0)
       (node Box
	     (setMaterial matGrey)
	     (setExtents 110 1 2)
	     ) 
       (node PlaneCollider
	     (setParams 0 1.0 0 -39)
	     )
       )

; create middle line
 (node Transform
       (setLocalPos 0 0 -1)
       (node Box
	     (setExtents 0.2 70 0.2)
	     (setMaterial matWhite)
	     )
       )

; create left outer field
 (node Transform
       (setLocalPos -52.5 0 -3)
       (node Box
	     (setMaterial matYellow)
	     (setExtents 5 70 4)
	     )
       )

; create left outer field
 (node Transform
       (setLocalPos 52.5 0 -3)
       (node Box
	     (setMaterial matYellow)
	     (setExtents 5 70 4)
	     )
       )

; create front outer field
 (node Transform
       (setLocalPos 0 -37.5 -3)
       (node Box
	     (setMaterial matYellow)
	     (setExtents 110 5 4)
	     )
       )

; create front outer field
 (node Transform
       (setLocalPos 0 37.5 -3)
       (node Box
	     (setMaterial matYellow)
	     (setExtents 110 5 4)
	     )
       )

;;
;; add the ball
;;

(node Ball
      (setLocalPos 25 0 10)


      (node Sphere
	    (setRadius 0.3)
	    (setMaterial matWhite)
	    )

      (node Body
	    (setName sphereBody)
	    (setSphere 2 0.3)
	    (node DragController
		  (setAngularDrag 0.2)
		  (setLinearDrag 0.4)
		  )
	    )
       
      (node SphereCollider
	    (setRadius 0.3)

	    (node ContactJointHandler
		  (setContactBounceMode false)

		  (setContactSlipMode true)
		  (setContactSlip 0.1 0.1)

		  (setContactSoftERPMode true)
		  (setContactSoftERP 0.5)

		  (setContactSoftCFM true)
		  (setContactSoftCFM 0.3)
		  )
	    )

      (node ObjectState
	    (setName Ball)
	    (setPerceptName Ball)
	    )
      )

 )