<html>
<head>
<title>Implementation</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>

<body bgcolor="#FFFFFF" text="#000000">
<p><font size="6"><i><b>Implementation</b></i></font></p>
<p>&nbsp;</p>
<p align="left"><font size="6"><font size="5"><b>General Information</b></font></font></p>
<p><font size="4">The implementation is contained in the 'source' directory of 
  this CD ... for convenience (so it can be distributed more easily) it is also 
  provided as a ZIP-archive (source.zip in the root directory of the CD). It is 
  provided in the form of several Microsoft Visual Studio 6 workspaces, each containing 
  several projects. Each project is implemented in the C++ programming language. 
  This documentation assumes that the reader is familiar with the C++ programming 
  language and the concepts of executable (EXE) files, program libraries (LIBs) 
  and dynamic link libraries (DLLs).</font></p>
<p align="left">&nbsp;</p>
<p align="left"><font size="6"><font size="5"><b>Basic Structure</b></font></font></p>
<p><font size="4">The entire software system is structured into three workspaces 
  (collection of projects)</font><font size="4">. The &quot;lib&quot; workspace, 
  the &quot;plugin&quot; workspace, and the &quot;app&quot; workspace. I have 
  found it easiest to work with three instances of Visual Studio running, one 
  for each workspace. Every workspace contains a number of different projects. 
  Each project produces a single output file (e.g. an executable). In addition 
  to this, the projects also rely on a number of external libraries. A list of 
  these libraries and where to obtain them is given in the diploma thesis. The 
  used libraries (and header files) are provided in the source code tree.</font></p>
<p>&nbsp;</p>
<p align="left"><font size="6"><font size="5"><b>LIB Workspace</b></font></font></p>
<p><font size="4">It contains the fundamental libraries, which comprise 90% of 
  the simulation system. Here is a quick overview of the three projects part of 
  this workspace and their purpose:</font></p>
<p><font size="4">Salt</font></p>
<blockquote>
  <p><font size="4">This library provides a collection of useful general purpose 
    classes. It contains mostly math-and system-related functionality, such as 
    a 3D Vector class, a Matrix class, a file I/O wrapper and an abstraction for 
    loading/accessing shared libraries.</font></p>
</blockquote>
<p><font size="4">Zeitgeist</font></p>
<blockquote>
  <p><font size="4">The Zeitgeist library provides two major features. It implements 
    a mechanism to work with class objects in C++. A class object is just a factory 
    of class instances. In addition to this mechanism, it also implements an object 
    hierarchy. This hierarchy is essentially a virtual file system, where the 
    'directories' and 'files' are instances of C++ classes. These two concepts 
    are quite intertwined with each other, as class objects can also live inside 
    the object hierarchy. Objects within the hierarchy are identified with a unique 
    name.</font></p>
  <p><font size="4">On top of these two features, the Zeitgeist library also provides 
    three very important 'built-in' services. Each basic service is usually represented 
    by a 'server' class in my terminology. An instance of such a class provides 
    the service to other parts of the system. The three services built into the 
    Zeitgeist library are the <a href="logserver.html">LogServer</a>, the <a href="fileserver.html">FileServer</a>, 
    and the <a href="scriptserver.html">ScriptServer</a>.</font></p>
</blockquote>
<p><font size="4">Kerosin</font></p>
<blockquote> 
  <p><font size="4">Kerosin is the actual engine which is used for the simulation. 
    It is implemented on top of the Zeitgeist framework and provides a multitude 
    of different services to a client application. It handles the visualization 
    aspect (ImageServer, FontServer, OpenGLServer, TextureServer, MaterialServer), 
    the physics aspect (PhysicsServer), the geometry aspect (PhysicsServer) and 
    the agent aspect (AgentAspect, ControlAspect). The classes in the library 
    also provide basic interfaces for receiving input (InputServer), playing sounds 
    (SoundServer) and most importantly performing the world simulation (SceneServer).</font></p>
</blockquote>
<p>&nbsp;</p>
<p align="left"><font size="6"><font size="5"><b>PLUGIN Workspace</b></font></font></p>
<p><font size="4">The Plugin workspace contains several class object libraries. 
  These are built in the form of Zeitgeist DLLs. Each DLL contains one or more 
  class objects, which it can register through a well-defined interface with the 
  Zeitgeist framework. Once a class object is registered with the framework it 
  can be used by other C++ classes. Here's an overview of the different available 
  plugins:</font></p>
<p><font size="4">FileSystemRAR</font></p>
<blockquote>
  <p><font size="4">An implementation of a FileSystem used by the FileServer. 
    This one allows access to RAR-compressed archives. It is built using the UNRAR.DLL. 
    Due to the way it accesses RAR archives it is not recommended to use this 
    type of filesystem for large files. The reason for this is, that the UNRAR.DLL 
    always has to sequentially search the RAR archive for every (!!) Open()-operation. 
    This is a limitation of the way the UNRAR.DLL was designed, as it is always 
    supposed to compress entire RAR archives and not just single files.</font></p>
</blockquote>
<p><font size="4">FileSystemSTD</font></p>
<blockquote>
  <p><font size="4">An implementation of a FileSystem used by the FileServer. 
    This one just stores the base-directory. Every subsequent Open()-operation 
    gets this base-directory as a prefix. The rest is just regular file system 
    I/O.</font></p>
</blockquote>
<p><font size="4">FileSystemZIP</font></p>
<blockquote>
  <p><font size="4">An implementation of a FileSystem used by the FileServer. 
    This one provides access to the files contained in a ZIP archive. This filesystem 
    is much more efficient than its RAR counterpart, as it allows random access 
    of file within the ZIP archives (it does not have to reopen the ZIP file for 
    each call to Open()).</font></p>
</blockquote>
<p><font size="4">InputSDL</font></p>
<blockquote>
  <p><font size="4">This is an implementation of a Kerosin InputSystem (managed 
    by the InputServer). It uses the SDL library input facilities. Therefore, 
    it also contains a dependency to the OpenGLServer in Kerosin, as it has to 
    initialize the SDL video mode, before input can be used.</font></p>
</blockquote>
<p><font size="4">SoundSystemBASS</font></p>
<blockquote>
  <p><font size="4">An implementation of the SoundSystem interface used by the 
    Kerosin SoundServer. This implementation is based on the BASS Sound Library.</font></p>
</blockquote>
<p><font size="4">SoundSystemFMOD</font></p>
<blockquote>
  <p><font size="4">An implementation of the SoundSystem interface used by the 
    Kerosin SoundServer. This implementation is based on the FMOD Sound Library.</font></p>
</blockquote>
<p><font size="4">Survival</font></p>
<blockquote>
  <p><font size="4">This is a sample simulation working together with the generic 
    simulator (see APP workspace). It demonstrates how an assembly script should 
    look like and how to implement custom agent aspects, control aspects and perceptors.</font></p>
</blockquote>
<p align="left">&nbsp;</p>
<p align="left"><font size="6"><font size="5"><b>APP Workspace</b></font></font></p>
<p><font size="4">The App workspace contains some sample applications, which demonstrate 
  various aspects of the Zeitgeist and Kerosin framework, as well as providing 
  the implementation of the generic simulator component.</font></p>
<p><font size="4">ZeitgeistTest</font></p>
<blockquote>
  <p><font size="4">This is just an 'empty' project, which creates and shuts down 
    the Zeitgeist framework.</font></p>
</blockquote>
<p><font size="4">CoreTest</font></p>
<blockquote>
  <p><font size="4">Also, a rather simple project. Executes some basic script 
    commands. After that it enters an interactive mode, which allows the user 
    to type in Ruby commands. </font></p>
</blockquote>
<p><font size="4">InputTest</font></p>
<blockquote>
  <p><font size="4">This sample demonstrates the use of the input system.</font></p>
</blockquote>
<p><font size="4">FontTest</font></p>
<blockquote>
  <p><font size="4">This sample demonstrates the use of the font system.</font></p>
</blockquote>
<p><font size="4">SceneTest</font></p>
<blockquote>
  <p><font size="4">This sample shows how a visual scene can be composed with 
    the Kerosin SceneServer.</font></p>
</blockquote>
<p><font size="4">Simulator</font></p>
<blockquote>
  <p><font size="4">The generic simulator.</font></p>
</blockquote>
<p>&nbsp;</p>
<p align="left"><font size="6"><font size="5"><b>Compiling the Projects</b></font></font></p>
<p><font size="4">Before being able to compile the projects a number of settings 
  have to be made in the Visual Studio/C++ 6 IDE. Under 'Extras-&gt;Options', 
  the library and include paths have to be set to:</font></p>
<p>&nbsp;</p>
<p><font size="4"><b><i>Include Paths:</i></b></font></p>
<blockquote>
  <p><font size="4">&lt;INSTDIR&gt;/external/stlport</font></p>
  <p><font size="4">&lt;INSTDIR&gt;/lib</font></p>
  <p><font size="4">&lt;INSTDIR&gt;/external</font></p>
  <p>&nbsp;</p>
</blockquote>
<p><font size="4"><b><i>Library Paths:</i></b></font></p>
<blockquote>
  <p><font size="4">&lt;INSTDIR&gt;/lib/bin/vc++</font></p>
  <p><font size="4"></font><font size="4">&lt;INSTDIR&gt;/external/bin/vc++</font></p>
  <p>&nbsp;</p>
</blockquote>
<p><font size="4">&lt;INSTDIR&gt; is the 'root' of the source directory. So, on 
  the CD it would be /source/! Also make sure, that these are the topmost paths 
  in the respective listboxes. All the required DLLs for actually running the 
  programs are located in the '/sharedlib/' directory of the CD. These should 
  be copied to a reachable path on the local machine and the PATH environment 
  variable should be adjusted so that the operating system will also look for 
  DLLs in this path. </font></p>
<p><font size="4">After these settings have been made, all projects in the workspaces 
  should compile 'out of the box'. When creating new APP and PLUGIN projects, 
  one should instruct the linker to link the necessary libraries with the project. 
  The best thing here is to just copy over the settings from the other projects 
  in the respective workspace.</font></p>
</body>
</html>

